# JVM

## 什么是JVM

1、JVM 指的是Java虚拟机，本质上是一个运行在计算机上的程序，他的职责是运行Java字节码文件，作用是为了支持跨平台特性。

2、JVM的功能有三项：第一是解释执行字节码指令；第二是管理内存中对象的分配，完成自动的垃圾回收（内存回收）；第三是优化热点代码提升执行效率（即时编译JIT）。

3、JVM组成分为类加载子系统、运行时数据区、执行引擎、本地接口这四部分。

4、常用的JVM是Oracle提供的Hotspot虚拟机，也可以选择GraalVM、龙井、OpenJ9等虚拟机。

![jvm组成](./jvm.assets/image.png)

## 了解字节码文件的组成吗？

字节码文件本质上是一个二进制的文件，无法直接用记事本等工具打开阅读其内容。需要通过专业的工具打开。

- 开发环境使用jclasslib插件
- 服务器环境使用javap –v命令

![image-20240303092047898](./jvm.assets/image-20240303092047898.png)

**基本信息**： 魔数、字节码文件对应的Java版本号、访问标识(public final等等)、父类和接口。

![image-20240303092208024](./jvm.assets/image-20240303092208024.png)

**常量池**：保存了字符串常量、类或接口名、字段名，主要在字节码指令中使用。

**字段**：当前类或接口声明的字段信息

**方法**：当前类或接口声明的方法信息、字节码指令。

属性：类的属性，比如源码的文件名、内部类的列表等。

## 说一下运行时数据区

 运行时数据区指的是JVM所管理的内存区域，其中分成两大类：

- 线程共享 – 方法区、堆     
- 线程不共享 – 本地方法栈、虚拟机栈、程序计数器























